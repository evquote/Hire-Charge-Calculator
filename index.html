<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Royal Birmingham Conservatoire — Multi-Venue Quote Calculator</title>
<style>
:root{
  --brand:#002e5b;
  --muted:#6b6b6b;
  --bg:#fafafa;
  --card:#ffffff;
}
body{font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:#222;margin:0;padding:20px;display:flex;justify-content:center;}
.wrapper{max-width:1000px;width:100%;}
header{display:flex;align-items:center;gap:16px;margin-bottom:18px;}
h1{font-size:20px;margin:0;color:var(--brand);}
.card{background:var(--card);padding:18px;border-radius:10px;box-shadow:0 6px 18px rgba(8,24,40,0.06);margin-bottom:14px;}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
label{display:block;font-size:13px;margin-bottom:6px;}
select,input[type=number]{width:100%;padding:8px;border:1px solid #ddd;border-radius:6px;box-sizing:border-box;}
.full{grid-column:1/-1;}
fieldset{border:1px solid #eee;padding:10px;border-radius:8px;margin:0;}
.row{display:flex;gap:8px;align-items:center;}
.qty{width:86px;}
.checkbox-row{display:flex;align-items:center;justify-content:space-between;padding:6px 0;border-bottom:1px solid #fafafa;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
th, td{border:1px solid #ddd;padding:8px;text-align:center;}
th{background:var(--brand);color:white;}
#grandTotal{font-weight:700;font-size:18px;color:var(--brand);text-align:right;margin-top:10px;}
button{background:var(--brand);color:white;border:none;padding:10px 14px;border-radius:8px;cursor:pointer;margin-right:6px;}
.muted{color:var(--muted);font-size:13px;}
@media (max-width:700px){.grid{grid-template-columns:1fr;}header{flex-direction:column;align-items:flex-start;}}
</style>
</head>
<body>
<div class="wrapper">
<header>
  <div>
    <h1>Royal Birmingham Conservatoire — Multi-Venue Quote</h1>
    <div class="muted">Add multiple venues to generate a combined quote. All prices + VAT.</div>
  </div>
</header>

<div class="card">
  <div class="grid">
    <div>
      <label for="venue">Venue / Space</label>
      <select id="venue">
        <option value="">— select venue —</option>
        <option value="Bradshaw">Bradshaw Hall</option>
        <option value="Recital">Recital Hall</option>
        <option value="Lab">The Lab</option>
        <option value="Jazz">Eastside Jazz Club</option>
        <option value="Organ">Organ Studio</option>
        <option value="WorkshopLarge">Workshop Space Large</option>
        <option value="WorkshopSmall">Workshop Space Small</option>
        <option value="DLHub">Distance Learning Hub</option>
        <option value="PracticeGrand2">Practice Room (2 grands)</option>
        <option value="PracticeGrand">Practice Room (grand)</option>
        <option value="PracticeUpright">Practice Room (upright)</option>
        <option value="Dressing">Additional Dressing Rooms</option>
      </select>
    </div>
    <div>
      <label for="hireType">Hire Type</label>
      <select id="hireType">
        <option value="standard">Standard Rate (includes FOH staff)</option>
        <option value="premium">Recording / Premium Workshop (dry hire)</option>
      </select>
    </div>
    <div>
      <label for="hours">Number of hours (min 4 for main venues)</label>
      <input id="hours" type="number" min="0" step="0.5" value="4" />
      <div class="muted">Main performance venues require a minimum of 4 hours hire.</div>
    </div>

    <div class="full">
      <fieldset>
        <legend><strong>Technical / Equipment</strong></legend>
        <div class="muted" style="margin-bottom:6px;">Quantity</div>
        <div class="checkbox-row"><div>PA (per day)</div><div><input id="pa_qty" class="qty" type="number" min="0" value="0" /></div></div>
        <div class="checkbox-row"><div>Projector (per day)</div><div><input id="projector_qty" class="qty" type="number" min="0" value="0" /></div></div>
        <div class="checkbox-row"><div>Microphone (wired)</div><div><input id="mic_wired_qty" class="qty" type="number" min="0" value="0" /></div></div>
        <div class="checkbox-row"><div>Microphone (wireless)</div><div><input id="mic_wireless_qty" class="qty" type="number" min="0" value="0" /></div></div>
        <div class="checkbox-row"><div>Monitor</div><div><input id="monitor_qty" class="qty" type="number" min="0" value="0" /></div></div>
        <div class="checkbox-row"><div>Overhead audio recording</div><div><input id="overhead_qty" class="qty" type="number" min="0" value="0" /></div></div>
        <div class="checkbox-row"><div>Static video recording</div><div><input id="video_qty" class="qty" type="number" min="0" value="0" /></div></div>
        <div class="checkbox-row"><div>Laptop</div><div><input id="laptop_qty" class="qty" type="number" min="0" value="0" /></div></div>
        <div class="checkbox-row"><div>Grand Piano</div><div><input id="piano_qty" class="qty" type="number" min="0" value="0" /></div></div>
        <div class="muted" style="margin-top:6px;">Other instrument hire is available upon request, subject to availability.</div>
      </fieldset>
    </div>

    <div class="full" style="margin-top:10px;">
      <fieldset>
        <legend><strong>Booking Times & Event Day(s)</strong></legend>
        <div class="muted" style="margin-bottom:6px;">
          Please include your full booking time (get-in and get-out).<br>
          Venues have regular opening hours: Mon–Fri 08:00–23:00, Sat–Sun 08:00–19:00.<br>
          After-hours surcharge: £20/hour + VAT applies outside these hours.
        </div>

        <div style="display:flex;gap:10px;margin-bottom:6px;">
          <div style="flex:1">
            <label for="startTime">Booking Start Time</label>
            <select id="startTime"></select>
          </div>
          <div style="flex:1">
            <label for="endTime">Booking End Time</label>
            <select id="endTime"></select>
          </div>
        </div>

        <div style="margin-bottom:6px;">
          <label><strong>Event Day(s)</strong></label>
          <div style="display:flex;flex-wrap:wrap;gap:10px;margin-top:4px;">
            <label><input type="checkbox" class="day" value="Mon"> Mon</label>
            <label><input type="checkbox" class="day" value="Tue"> Tue</label>
            <label><input type="checkbox" class="day" value="Wed"> Wed</label>
            <label><input type="checkbox" class="day" value="Thu"> Thu</label>
            <label><input type="checkbox" class="day" value="Fri"> Fri</label>
            <label><input type="checkbox" class="day" value="Sat"> Sat</label>
            <label><input type="checkbox" class="day" value="Sun"> Sun</label>
          </div>
        </div>
      </fieldset>
    </div>

    <div class="full" style="margin-top:10px;">
      <button id="addBtn">Add to Quote</button>
      <button id="emailBtn">Email Quote</button>
      <button id="downloadBtn">Download HTML</button>
    </div>
  </div>
</div>

<div class="card">
  <h3 style="margin-top:0">Quote Summary</h3>
  <table id="orderTable">
    <thead>
      <tr>
        <th>Venue</th><th>Hire Type</th><th>Hours</th><th>Base (£)</th><th>Equipment (£)</th><th>Subtotal (£)</th><th>VAT (£)</th><th>Total (£)</th><th>Remove</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <div id="afterHoursRow" style="font-weight:600;color:var(--brand);margin-top:8px;"></div>
  <div id="grandTotal">Grand Total: £0.00</div>
  <div class="muted" style="margin-top:6px;">Technician hours will be quoted separately based on the technical requirements of the event.</div>
  <div class="muted" style="margin-top:6px;">
    For bookings that run past our regular opening hours, a surcharge of £20 per-hour +VAT applies.<br>
    Please see our Technical Specification and Hire Charges document for more information.
  </div>
  <div class="muted">For booking & detailed technical quotes contact: conservatoireevents@bcu.ac.uk</div>
</div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const rates = {
    Bradshaw:{standard:250,premium:125}, Recital:{standard:200,premium:100},
    Lab:{standard:175,premium:87.5}, Jazz:{standard:175,premium:87.5}, Organ:{standard:150,premium:75},
    WorkshopLarge:{standard:60,premium:60}, WorkshopSmall:{standard:50,premium:50}, DLHub:{standard:35,premium:35},
    PracticeGrand2:{standard:40,premium:40}, PracticeGrand:{standard:30,premium:30}, PracticeUpright:{standard:25,premium:25},
    Dressing:{standard:25,premium:25}
  };
  const mainVenues=['Bradshaw','Recital','Jazz','Organ','Lab'];
  const PIANO_RATE=100;
  let order=[];

  // Populate start and end time dropdowns
  function populateTimeDropdowns(){
    const startSelect=document.getElementById('startTime');
    const endSelect=document.getElementById('endTime');
    for(let h=0;h<24;h++){
      for(let m=0;m<60;m+=30){
        const val=('0'+h).slice(-2)+':'+('0'+m).slice(-2);
        [startSelect,endSelect].forEach(select=>{
          const opt=document.createElement('option'); opt.value=val; opt.textContent=val;
          select.appendChild(opt);
        });
      }
    }
    startSelect.value='09:00';
    endSelect.value='23:00';
  }
  populateTimeDropdowns();

  // Format GBP
  function formatGBP(n){return '£'+n.toFixed(2);}

  // Calculate costs
  function calculateCosts(baseRate,hours,equip){
    const base=baseRate*hours;
    const addons=(equip.pa||0)*100+(equip.projector||0)*250+(equip.micWired||0)*20+
                 (equip.micWireless||0)*40+(equip.monitor||0)*15+(equip.overhead||0)*100+
                 (equip.video||0)*250+(equip.laptop||0)*50+(equip.piano||0)*PIANO_RATE;
    const subtotal=base+addons;
    const vat=subtotal*0.2;
    const total=subtotal+vat;
    return {base,addons,subtotal,vat,total};
  }

  // Calculate after-hours surcharge
  function calculateAfterHours(){
    const selectedDays=Array.from(document.querySelectorAll(".day:checked")).map(d=>d.value);
    if(!selectedDays.length) return {surcharge:0,vat:0,total:0};
    const startTime=document.getElementById('startTime').value;
    const endTime=document.getElementById('endTime').value;
    const [startH,startM]=startTime.split(':').map(Number);
    const [endH,endM]=endTime.split(':').map(Number);
    let surcharge=0;
    selectedDays.forEach(day=>{
      const opening=8;
      const closing=(day==='Sat'||day==='Sun')?19:23;
      const bookingStart=startH+(startM>0?0.5:0);
      const bookingEnd=endH+(endM>0?0.5:0);
      if(bookingStart<opening) surcharge+=Math.ceil(opening-bookingStart)*20;
      if(bookingEnd>closing) surcharge+=Math.ceil(bookingEnd-closing)*20;
    });
    const vat=surcharge*0.2;
    return {surcharge,vat,total:surcharge+vat};
  }

  // Update table
  function updateTable(){
    const tbody=document.querySelector('#orderTable tbody');
    tbody.innerHTML='';
    let grand=0;
    order.forEach((item,index)=>{
      const row=document.createElement('tr');
      row.innerHTML=`<td>${item.venue}</td><td>${item.hireType}</td><td>${item.hours}</td>
      <td>${formatGBP(item.costs.base)}</td><td>${formatGBP(item.costs.addons)}</td>
      <td>${formatGBP(item.costs.subtotal)}</td><td>${formatGBP(item.costs.vat)}</td>
      <td>${formatGBP(item.costs.total)}</td>
      <td><button onclick="removeItem(${index})">Remove</button></td>`;
      tbody.appendChild(row);
      grand+=item.costs.total;
    });
    const after=calculateAfterHours();
    document.getElementById('afterHoursRow').textContent=`After-hours surcharge: ${formatGBP(after.surcharge)} + VAT = ${formatGBP(after.total)}`;
    document.getElementById('grandTotal').textContent='Grand Total: '+formatGBP(grand+after.total);
  }

  // Remove item (make global for button)
  window.removeItem=(i)=>{order.splice(i,1);updateTable();};

  // Add to quote
  document.getElementById('addBtn').addEventListener('click',()=>{
    const venue=document.getElementById('venue').value;
    if(!venue){alert('Please select a venue');return;}
    const hireType=document.getElementById('hireType').value;
    let hours=parseFloat(document.getElementById('hours').value)||0;
    if(mainVenues.includes(venue) && hours<4){
      alert('Main performance venues require a minimum of 4 hours.');
      hours=4;
      document.getElementById('hours').value=4;
    }
    const equip={
      pa:parseInt(document.getElementById('pa_qty').value)||0,
      projector:parseInt(document.getElementById('projector_qty').value)||0,
      micWired:parseInt(document.getElementById('mic_wired_qty').value)||0,
      micWireless:parseInt(document.getElementById('mic_wireless_qty').value)||0,
      monitor:parseInt(document.getElementById('monitor_qty').value)||0,
      overhead:parseInt(document.getElementById('overhead_qty').value)||0,
      video:parseInt(document.getElementById('video_qty').value)||0,
      laptop:parseInt(document.getElementById('laptop_qty').value)||0,
      piano:parseInt(document.getElementById('piano_qty').value)||0
    };
    const costs=calculateCosts(rates[venue][hireType],hours,equip);
    order.push({venue,hireType,hours,equip,costs});
    updateTable();
  });

  // Email quote
  document.getElementById('emailBtn').addEventListener('click',()=>{
    if(order.length===0){alert('Please add at least one venue to the quote');return;}
    let bodyText=order.map((item,i)=>{
      return `Quote Item ${i+1}: Venue: ${item.venue} Hire Type: ${item.hireType} Hours: ${item.hours} Base: ${formatGBP(item.costs.base)} Equipment: ${formatGBP(item.costs.addons)} Subtotal: ${formatGBP(item.costs.subtotal)} VAT: ${formatGBP(item.costs.vat)} Total: ${formatGBP(item.costs.total)}`;
    }).join('\n\n');
    const after=calculateAfterHours();
    const grand=order.reduce((a,b)=>a+b.costs.total,0)+after.total;
    bodyText+=`\n\nAfter-hours surcharge: ${formatGBP(after.surcharge)} + VAT = ${formatGBP(after.total)}`;
    bodyText+=`\n\nGrand Total: ${formatGBP(grand)}\n\nTechnician hours will be quoted separately based on the technical requirements of the event.`;

    const subject='Royal Birmingham Conservatoire - Event Quote';
    const mailto=`mailto:conservatoireevents@bcu.ac.uk?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(bodyText)}`;
    window.location.href=mailto;
  });

  // Download quote
  document.getElementById('downloadBtn').addEventListener('click',()=>{
    let html=`<html><head><title>Quote</title></head><body><h1>Quote Summary</h1><table border="1" cellspacing="0" cellpadding="5"><tr><th>Venue</th><th>Hire Type</th><th>Hours</th><th>Base (£)</th><th>Equipment (£)</th><th>Subtotal (£)</th><th>VAT (£)</th><th>Total (£)</th></tr>`;
    order.forEach(item=>{
      html+=`<tr><td>${item.venue}</td><td>${item.hireType}</td><td>${item.hours}</td><td>${formatGBP(item.costs.base)}</td><td>${formatGBP(item.costs.addons)}</td><td>${formatGBP(item.costs.subtotal)}</td><td>${formatGBP(item.costs.vat)}</td><td>${formatGBP(item.costs.total)}</td></tr>`;
    });
    const after=calculateAfterHours();
    html+=`<tr><td colspan="7" style="text-align:right">After-hours surcharge</td><td>${formatGBP(after.total)}</td></tr>`;
    const grandTotal=order.reduce((a,b)=>a+b.costs.total,0)+after.total;
    html+=`<tr><td colspan="7" style="text-align:right"><strong>Grand Total</strong></td><td><strong>${formatGBP(grandTotal)}</strong></td></tr>`;
    html+='</table></body></html>';
    const blob=new Blob([html],{type:'text/html'});
    const url=URL.createObjectURL(blob);
    const a=document.createElement('a'); a.href=url; a.download='quote.html'; a.click();
    URL.revokeObjectURL(url);
  });
});
</script>
</body>
</html>
